### Binstubs & the difference between rails, script/rails, and bin/rails.

#### What are binstubs? 
Binstubs are the executable files residing in `bin/` folder of a Rails project. 

#### Why doesn’t my Rails 3 project have a `bin/` folder?
`bin/` folder was introduced in Rails 4, and Rails 3 projects do not have bin/ folder. 

#### Where were binstubs in Rails 3, then?
Executables used to sit in `script/` folder in Rails 3. 

#### Why can’t I use `bundle exec <command>`?
We have always been told to use `bundle exec <executable command>` to ensure correct behavior of executables in a Rails project. If you do not use `bundle exec <executable command>` (for e.g. `bundle exec rake db:migrate`), then the command will be run with the latest available executable/binary no matter what your `Gemfile.lock` says. 

This is explained nicely [here](https://www.jstorimer.com/blogs/workingwithcode/7766121-the-rails-command-and-exec2).

When you use the rails command you pay the penalty of loading every gemspec on your system. Even worse is using bundle exec rails. Since both bundle and rails are rubygems binstubs you pay that penalty twice!
By using `./script/rails` you can avoid paying that penalty and execute just a little bit less code from Rails startup. And, as we all know: **The best code is no code at all**.

Using `bin/rails` or `script/rails` removes the noise created by `bundle exec`. 

#### What’s the Rails way of using binstubs?
Rails is an opinionated framework and believes in convention over configuration. 
- Rails 3 way: script/rails server
- Rails 4 way: bin/rails server

#### What does Rails say about it?
Refer: [Rails app loader](https://github.com/rails/rails/blob/master/railties/lib/rails/app_loader.rb). 

```
Beginning in Rails 4, Rails ships with a `rails` binstub at ./bin/rails that
should be used instead of the Bundler-generated `rails` binstub.

If you are seeing this message, your binstub at ./bin/rails was generated by
Bundler instead of Rails.

You might need to regenerate your `rails` binstub locally and add it to source
control:
 rails app:update:bin           # Bear in mind this generates other binstubs
                                # too that you may or may not want (like yarn)
                                
                                
If you already have Rails binstubs in source control, you might be
inadvertently overwriting them during deployment by using bundle install
with the --binstubs option.

If your application was created prior to Rails 4, here's how to upgrade:
  bundle config --delete bin    # Turn off Bundler's stub generator
  rails app:update:bin          # Use the new Rails executables
  git add bin                   # Add bin/ to source control
  
  
You may need to remove bin/ from your .gitignore as well.

When you install a gem whose executable you want to use in your app,
generate it and add it to source control:

  bundle binstubs some-gem-name
  git add bin/new-executable
```

#### A few more references: 
- [Bundle exec and its disadvantages](https://www.wyeworks.com/blog/2011/12/27/bundle-exec-rails-executes-bundler-setup-3-times/)
- [What is exec(2) and how it works](https://www.jstorimer.com/blogs/workingwithcode/7766121-the-rails-command-and-exec2)
- [Invoke Rails & Rake](https://mattbrictson.com/invoke-rails-and-rake-faster-and-with-fewer-mistakes)
- [Gem versioning and how it works](https://yehudakatz.com/2011/05/29/gem-versioning-and-bundler-doing-it-right/)
- [What is inside my .bin/ folder](https://stackoverflow.com/a/27585155)
